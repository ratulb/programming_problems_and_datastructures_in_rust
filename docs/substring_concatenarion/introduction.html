<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Concatenated substring indices - Programming problems in rust</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Programming problems in rust">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/introduction.html"><strong aria-hidden="true">2.</strong> Binary search tree</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../binary_search_tree/tree_and_node.html"><strong aria-hidden="true">2.1.</strong> Tree and Node</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../binary_search_tree/basic_apis.html"><strong aria-hidden="true">2.1.1.</strong> Basic APIs</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_insert.html"><strong aria-hidden="true">2.1.2.</strong> Tree population</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_find.html"><strong aria-hidden="true">2.1.3.</strong> Tree find</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/node_delete.html"><strong aria-hidden="true">2.1.4.</strong> Node delete (Two children)</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/delete_child.html"><strong aria-hidden="true">2.1.5.</strong> Node delete (One or no child)</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_delete.html"><strong aria-hidden="true">2.1.6.</strong> Tree delete</a></li></ol></li><li class="chapter-item expanded "><a href="../binary_search_tree/additional.html"><strong aria-hidden="true">2.2.</strong> Additional APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../binary_search_tree/tree_minimum.html"><strong aria-hidden="true">2.2.1.</strong> Tree minimum</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_exists.html"><strong aria-hidden="true">2.2.2.</strong> Tree exists</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_identical.html"><strong aria-hidden="true">2.2.3.</strong> Tree identical</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_contains.html"><strong aria-hidden="true">2.2.4.</strong> Tree contains</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_iterator.html"><strong aria-hidden="true">2.2.5.</strong> Tree iterator</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_into_iterator.html"><strong aria-hidden="true">2.2.6.</strong> Tree into iterator</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_height.html"><strong aria-hidden="true">2.2.7.</strong> Tree height</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/lca.html"><strong aria-hidden="true">2.2.8.</strong> LCA</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/nth_smallest.html"><strong aria-hidden="true">2.2.9.</strong> Nth smallest</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/kth_smallest.html"><strong aria-hidden="true">2.2.10.</strong> Kth smallest</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/from_sorted_array.html"><strong aria-hidden="true">2.2.11.</strong> From sorted array</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/validation.html"><strong aria-hidden="true">2.2.12.</strong> Tree validation</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/updation.html"><strong aria-hidden="true">2.2.13.</strong> Tree update</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../doubly_linkedlist/introduction.html"><strong aria-hidden="true">3.</strong> Dubley linkedlist</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../doubly_linkedlist/node_and_list.html"><strong aria-hidden="true">3.1.</strong> Node and List</a></li><li class="chapter-item expanded "><a href="../doubly_linkedlist/push_front_and_back.html"><strong aria-hidden="true">3.2.</strong> Push front and push back</a></li><li class="chapter-item expanded "><a href="../doubly_linkedlist/pop_front_and_back.html"><strong aria-hidden="true">3.3.</strong> Pop front and pop back</a></li><li class="chapter-item expanded "><a href="../doubly_linkedlist/delete.html"><strong aria-hidden="true">3.4.</strong> List delete</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../doubly_linkedlist/delete_helpers.html"><strong aria-hidden="true">3.4.1.</strong> Delete helpers</a></li></ol></li><li class="chapter-item expanded "><a href="../doubly_linkedlist/iterators.html"><strong aria-hidden="true">3.5.</strong> List iterators</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../doubly_linkedlist/mutable_iterator.html"><strong aria-hidden="true">3.5.1.</strong> Mutable iterator</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../doubly_linkedlist/mutable_back_iterator.html"><strong aria-hidden="true">3.5.1.1.</strong> Iterating back</a></li></ol></li><li class="chapter-item expanded "><a href="../doubly_linkedlist/immutable_iterator.html"><strong aria-hidden="true">3.5.2.</strong> Bidirectional iterator</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../sorting/introduction.html"><strong aria-hidden="true">4.</strong> Sorting algorithms</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../sorting/bubblesort.html"><strong aria-hidden="true">4.1.</strong> Bubble sort</a></li><li class="chapter-item expanded "><a href="../sorting/insertionsort.html"><strong aria-hidden="true">4.2.</strong> Insertion sort</a></li><li class="chapter-item expanded "><a href="../sorting/selectionsort.html"><strong aria-hidden="true">4.3.</strong> Selection sort</a></li><li class="chapter-item expanded "><a href="../sorting/mergesort.html"><strong aria-hidden="true">4.4.</strong> Merge sort</a></li><li class="chapter-item expanded "><a href="../sorting/quicksort.html"><strong aria-hidden="true">4.5.</strong> Quick sort</a></li></ol></li><li class="chapter-item expanded "><a href="../lru_cache/introduction.html"><strong aria-hidden="true">5.</strong> LRU cache</a></li><li class="chapter-item expanded "><a href="../heap/introduction.html"><strong aria-hidden="true">6.</strong> Heap</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../heap/max_heap.html"><strong aria-hidden="true">6.1.</strong> Max heap</a></li><li class="chapter-item expanded "><a href="../heap/min_heap.html"><strong aria-hidden="true">6.2.</strong> Min heap</a></li><li class="chapter-item expanded "><a href="../heap/max_min_heap.html"><strong aria-hidden="true">6.3.</strong> Max min heap</a></li></ol></li><li class="chapter-item expanded "><a href="../trie/introduction.html"><strong aria-hidden="true">7.</strong> Trie</a></li><li class="chapter-item expanded "><a href="../prefix_suffix/introduction.html"><strong aria-hidden="true">8.</strong> Longest common prefix/suffixes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../prefix_suffix/longest_prefix.html"><strong aria-hidden="true">8.1.</strong> Longest common prefix</a></li><li class="chapter-item expanded "><a href="../prefix_suffix/longest_suffix.html"><strong aria-hidden="true">8.2.</strong> Longest common suffix</a></li></ol></li><li class="chapter-item expanded "><a href="../permutations/introduction.html"><strong aria-hidden="true">9.</strong> String permutation</a></li><li class="chapter-item expanded "><a href="../merge_ksorted_arrays/introduction.html"><strong aria-hidden="true">10.</strong> Merge k sorted arrays</a></li><li class="chapter-item expanded "><a href="../substring_concatenarion/introduction.html" class="active"><strong aria-hidden="true">11.</strong> Concatenated substring indices</a></li><li class="chapter-item expanded "><a href="../pascal_triangle/introduction.html"><strong aria-hidden="true">12.</strong> Pascal's triangle</a></li><li class="chapter-item expanded "><a href="../two_sum/introduction.html"><strong aria-hidden="true">13.</strong> Two sum</a></li><li class="chapter-item expanded "><a href="../sell_stock/introduction.html"><strong aria-hidden="true">14.</strong> Sell stock</a></li><li class="chapter-item expanded "><a href="../product_except_self/introduction.html"><strong aria-hidden="true">15.</strong> Product except self</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Programming problems in rust</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="substring-with-concatenation-of-all-words"><a class="header" href="#substring-with-concatenation-of-all-words">Substring with Concatenation of All Words</a></h1>
<p>Given a string s and an array of strings words of the same length. Return all starting indices of substring(s) in s that is a concatenation of each word in words exactly once, in any order, and without any intervening characters.</p>
<p>The answer can be in any order.</p>
<p>Example 1:</p>
<p>Input: s = &quot;barfoothefoobarman&quot;, words = [&quot;foo&quot;,&quot;bar&quot;]
Output: [0,9]
Explanation: Substrings starting at index 0 and 9 are &quot;barfoo&quot; and &quot;foobar&quot; respectively
The output order does not matter, returning [9,0] is fine too.</p>
<p>Example 2:</p>
<p>Input: s = &quot;wordgoodgoodgoodbestword&quot;, words = [&quot;word&quot;,&quot;good&quot;,&quot;best&quot;,&quot;word&quot;]</p>
<p>Output: [12]</p>
<p>Ingnore the duplicate search words above.</p>
<p>Example 3:</p>
<p>Input: s = &quot;barfoofoobarthefoobarman&quot;, words = [&quot;bar&quot;,&quot;foo&quot;,&quot;the&quot;]</p>
<p>Output: [6,9,12]</p>
<h3 id="solution-explanation-we-use-a-double-ended-queue-for-this-solution-we-keep-iterating-through-the-given-input-string-for-chuncks"><a class="header" href="#solution-explanation-we-use-a-double-ended-queue-for-this-solution-we-keep-iterating-through-the-given-input-string-for-chuncks">Solution explanation: We use a <a href="https://doc.rust-lang.org/std/collections/struct.VecDeque.html">double ended queue</a> for this solution. We keep iterating through the given input string for chuncks</a></h3>
<p>of words equal in length to the search key words' and keep pushing them into the queue. When we the 
queue size becomes equal to the search key words' array size, we add the index of the first chunck 
to the result vector and delete all entries but the last - because that could be the beginning of 
another substring. If we encounter duplicate immediately after a previous chunck - we clear queue 
and add just only the current chunck. We also check for previous duplicates - and remove them if any. </p>
<h3 id="following-is-the-implementation"><a class="header" href="#following-is-the-implementation">Following is the implementation:</a></h3>
<pre><code class="language-rust  ignore">/// Substring with Concatenation of All Words

use std::collections::HashSet;
use std::collections::VecDeque;

pub fn find_substring(s: String, search_words: Vec&lt;String&gt;) -&gt; Vec&lt;usize&gt; {
    if s.is_empty() || search_words.is_empty() {
        return vec![];
    }
    let result = substring_indices(s, search_words);
    result
}

fn substring_indices(s: String, words: Vec&lt;String&gt;) -&gt; Vec&lt;usize&gt; {
    let mut result = Vec::new();
    if s.is_empty() || words.is_empty() {
        return result;
    }
    let mut stack: VecDeque&lt;(&amp;str, usize)&gt; = VecDeque::with_capacity(words.len());
    let split_size = words[0].len();
    //Get rid of duplicate search words
    let words = HashSet::&lt;String&gt;::from_iter(words);
    let mut index = 0;
    while index &lt;= s.len() - split_size {
        let chunck = &amp;s[index..index + split_size];
        if words.contains(&amp;chunck.to_string()) {
            if let Some(back) = stack.back() {
                if &amp;back.0 == &amp;chunck {
                    stack.clear();
                    stack.push_back((chunck, index));
                } else {
                    let repeat = stack
                        .iter()
                        .enumerate()
                        .find(|repeat| repeat.1 .0 == chunck);
                    if let Some(repeat) = repeat {
                        for _ in 0..=repeat.0 {
                            stack.pop_front();
                        }
                    }
                    stack.push_back((chunck, index));
                }
            } else {
                stack.push_back((chunck, index));
            }
        } else {
            stack.clear();
        }
        if stack.len() == words.len() {
            let first = stack.pop_front();
            if words.len() &gt;= 2 {
                for _ in 0..words.len() - 2 {
                    stack.pop_front();
                }
            }
            if let Some(first) = first {
                result.push(first.1);
            }
        }
        index += split_size;
    }
    result
}
</code></pre>
<p><a href="https://github.com/ratulb/programming_problems_in_rust/blob/master/substring_concatenation/src/lib.rs">Source</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../merge_ksorted_arrays/introduction.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../pascal_triangle/introduction.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../merge_ksorted_arrays/introduction.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../pascal_triangle/introduction.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
