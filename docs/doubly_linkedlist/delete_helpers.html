<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Delete helpers - Programming problems in rust</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Programming problems in rust">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/introduction.html"><strong aria-hidden="true">2.</strong> Binary search tree</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../binary_search_tree/tree_and_node.html"><strong aria-hidden="true">2.1.</strong> Tree and Node</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../binary_search_tree/basic_apis.html"><strong aria-hidden="true">2.1.1.</strong> Basic APIs</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_insert.html"><strong aria-hidden="true">2.1.2.</strong> Tree population</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_find.html"><strong aria-hidden="true">2.1.3.</strong> Tree find</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/node_delete.html"><strong aria-hidden="true">2.1.4.</strong> Node delete (Two children)</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/delete_child.html"><strong aria-hidden="true">2.1.5.</strong> Node delete (One or no child)</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_delete.html"><strong aria-hidden="true">2.1.6.</strong> Tree delete</a></li></ol></li><li class="chapter-item expanded "><a href="../binary_search_tree/additional.html"><strong aria-hidden="true">2.2.</strong> Additional APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../binary_search_tree/tree_minimum.html"><strong aria-hidden="true">2.2.1.</strong> Tree minimum</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_exists.html"><strong aria-hidden="true">2.2.2.</strong> Tree exists</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_identical.html"><strong aria-hidden="true">2.2.3.</strong> Tree identical</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_contains.html"><strong aria-hidden="true">2.2.4.</strong> Tree contains</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_iterator.html"><strong aria-hidden="true">2.2.5.</strong> Tree iterator</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_into_iterator.html"><strong aria-hidden="true">2.2.6.</strong> Tree into iterator</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/tree_height.html"><strong aria-hidden="true">2.2.7.</strong> Tree height</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/lca.html"><strong aria-hidden="true">2.2.8.</strong> LCA</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/nth_smallest.html"><strong aria-hidden="true">2.2.9.</strong> Nth smallest</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/kth_smallest.html"><strong aria-hidden="true">2.2.10.</strong> Kth smallest</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/from_sorted_array.html"><strong aria-hidden="true">2.2.11.</strong> From sorted array</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/validation.html"><strong aria-hidden="true">2.2.12.</strong> Tree validation</a></li><li class="chapter-item expanded "><a href="../binary_search_tree/updation.html"><strong aria-hidden="true">2.2.13.</strong> Tree update</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../doubly_linkedlist/introduction.html"><strong aria-hidden="true">3.</strong> Dubley linkedlist</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../doubly_linkedlist/node_and_list.html"><strong aria-hidden="true">3.1.</strong> Node and List</a></li><li class="chapter-item expanded "><a href="../doubly_linkedlist/push_front_and_back.html"><strong aria-hidden="true">3.2.</strong> Push front and push back</a></li><li class="chapter-item expanded "><a href="../doubly_linkedlist/pop_front_and_back.html"><strong aria-hidden="true">3.3.</strong> Pop front and pop back</a></li><li class="chapter-item expanded "><a href="../doubly_linkedlist/delete.html"><strong aria-hidden="true">3.4.</strong> List delete</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../doubly_linkedlist/delete_helpers.html" class="active"><strong aria-hidden="true">3.4.1.</strong> Delete helpers</a></li></ol></li><li class="chapter-item expanded "><a href="../doubly_linkedlist/iterators.html"><strong aria-hidden="true">3.5.</strong> List iterators</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../doubly_linkedlist/mutable_iterator.html"><strong aria-hidden="true">3.5.1.</strong> Mutable iterator</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../doubly_linkedlist/mutable_back_iterator.html"><strong aria-hidden="true">3.5.1.1.</strong> Iterating back</a></li></ol></li><li class="chapter-item expanded "><a href="../doubly_linkedlist/immutable_iterator.html"><strong aria-hidden="true">3.5.2.</strong> Bidirectional iterator</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../sorting/introduction.html"><strong aria-hidden="true">4.</strong> Sorting algorithms</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../sorting/bubblesort.html"><strong aria-hidden="true">4.1.</strong> Bubble sort</a></li><li class="chapter-item expanded "><a href="../sorting/insertionsort.html"><strong aria-hidden="true">4.2.</strong> Insertion sort</a></li><li class="chapter-item expanded "><a href="../sorting/selectionsort.html"><strong aria-hidden="true">4.3.</strong> Selection sort</a></li><li class="chapter-item expanded "><a href="../sorting/mergesort.html"><strong aria-hidden="true">4.4.</strong> Merge sort</a></li><li class="chapter-item expanded "><a href="../sorting/quicksort.html"><strong aria-hidden="true">4.5.</strong> Quick sort</a></li></ol></li><li class="chapter-item expanded "><a href="../lru_cache/introduction.html"><strong aria-hidden="true">5.</strong> LRU cache</a></li><li class="chapter-item expanded "><a href="../heap/introduction.html"><strong aria-hidden="true">6.</strong> Heap</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../heap/max_heap.html"><strong aria-hidden="true">6.1.</strong> Max heap</a></li><li class="chapter-item expanded "><a href="../heap/min_heap.html"><strong aria-hidden="true">6.2.</strong> Min heap</a></li><li class="chapter-item expanded "><a href="../heap/max_min_heap.html"><strong aria-hidden="true">6.3.</strong> Max min heap</a></li></ol></li><li class="chapter-item expanded "><a href="../trie/introduction.html"><strong aria-hidden="true">7.</strong> Trie</a></li><li class="chapter-item expanded "><a href="../prefix_suffix/introduction.html"><strong aria-hidden="true">8.</strong> Longest common prefix/suffixes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../prefix_suffix/longest_prefix.html"><strong aria-hidden="true">8.1.</strong> Longest common prefix</a></li><li class="chapter-item expanded "><a href="../prefix_suffix/longest_suffix.html"><strong aria-hidden="true">8.2.</strong> Longest common suffix</a></li></ol></li><li class="chapter-item expanded "><a href="../permutations/introduction.html"><strong aria-hidden="true">9.</strong> String permutation</a></li><li class="chapter-item expanded "><a href="../merge_ksorted_arrays/introduction.html"><strong aria-hidden="true">10.</strong> Merge k sorted arrays</a></li><li class="chapter-item expanded "><a href="../substring_concatenarion/introduction.html"><strong aria-hidden="true">11.</strong> Concatenated substring indices</a></li><li class="chapter-item expanded "><a href="../pascal_triangle/introduction.html"><strong aria-hidden="true">12.</strong> Pascal's triangle</a></li><li class="chapter-item expanded "><a href="../two_sum/introduction.html"><strong aria-hidden="true">13.</strong> Two sum</a></li><li class="chapter-item expanded "><a href="../sell_stock/introduction.html"><strong aria-hidden="true">14.</strong> Sell stock</a></li><li class="chapter-item expanded "><a href="../product_except_self/introduction.html"><strong aria-hidden="true">15.</strong> Product except self</a></li><li class="chapter-item expanded "><a href="../max_sub_array_sum/introduction.html"><strong aria-hidden="true">16.</strong> Max sub array sum</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Programming problems in rust</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="delete-helpers"><a class="header" href="#delete-helpers">Delete helpers</a></h1>
<p>To figure out whether a target node that is being deleted is the first or last node in the list,
we compare it to the head or the tail of the list. This comparsion we do by using the <a href="https://doc.rust-lang.org/std/rc/struct.Rc.html#method.ptr_eq">ptr_eq</a>.</p>
<h3 id="below-are-the-codes-for-achieving-the-same"><a class="header" href="#below-are-the-codes-for-achieving-the-same">Below are the codes for achieving the same:</a></h3>
<pre><code class="language-rust  ignore">    //Is the passed in node reference the first in the list?
    fn is_first(&amp;self, node: &amp;Rc&lt;RefCell&lt;Node&lt;T&gt;&gt;&gt;) -&gt; bool {
        match self.head {
            None =&gt; false,
            Some(ref head) =&gt; Rc::ptr_eq(head, node),
        }
    }

    //Is the passed in node reference the last in the list?
    fn is_last(&amp;self, node: &amp;Rc&lt;RefCell&lt;Node&lt;T&gt;&gt;&gt;) -&gt; bool {
        match self.tail {
            None =&gt; false,
            Some(ref tail) =&gt; Rc::ptr_eq(tail, node),
        }
    }
</code></pre>
<p>One we have figured that a target node that is being deleted is either first or last, its just a
matter of calling <code>pop_front</code> or <code>pop_back</code> accordingly.</p>
<h3 id="deleting-a-inner-target-node"><a class="header" href="#deleting-a-inner-target-node">Deleting a inner target node:</a></h3>
<p>To delete inner target node we first get a handles to its previous and next nodes. Once we find them,
we need to rewire the linkages appropriately.</p>
<p>We clone the the outgoing target's previous pointer, which is a weak pointer reference, set it as theprevious pointer of the outgoing node's next node.</p>
<p>We upgrade previous (<code>prev</code>) weak  pointer to get a strong refernce to get to previous node and set 
next's cloned reference as its next. Then we return the content of outgoing target node.</p>
<p>Following is snippet for deleting an inner node:</p>
<pre><code class="language-rust  ignore">//Delete a node that has previous and next
    fn delete_inner(&amp;mut self, target: &amp;Rc&lt;RefCell&lt;Node&lt;T&gt;&gt;&gt;) -&gt; Option&lt;T&gt; {
        let prev = target.borrow_mut().prev.take();
        let next = target.borrow_mut().next.take();
        if let Some(ref next) = next {
            next.borrow_mut().prev = prev.as_ref().cloned();
        }
        if let Some(ref prev) = prev {
            if let Some(prev) = prev.upgrade() {
                prev.borrow_mut().next = next.as_ref().map(Rc::clone);
            }
        }
        Some(target.take().key)
    }
</code></pre>
<p>Now, that we know how the helpers work, we present the actual <code>delete</code> function - which is quite
simple.</p>
<h3 id="delete-public-api"><a class="header" href="#delete-public-api">Delete public API:</a></h3>
<pre><code class="language-rust  ignore">    //Delete a key from the list. We try to find the by using iterator `find` method.
    //If found - we check if it is the first or last key in the list. If the found node
    //happens to be first or last - we call pop_front or pop_back as required.
    //If the key is in between head and and tail - the deletion is handled accordingly.
    pub fn delete(&amp;mut self, key: &amp;T) -&gt; Option&lt;T&gt; {
        match self.node_iter().find(|node| node.borrow().key == *key) {
            None =&gt; None,
            Some(ref target) =&gt; match (self.is_first(target), self.is_last(target)) {
                (true, true) | (true, false) =&gt; self.pop_front(),
                (false, true) =&gt; self.pop_back(),
                (_, _) =&gt; self.delete_inner(target),
            },
        }
    }
</code></pre>
<blockquote>
<p><strong>Note</strong>: To find the target node that is being deleted, we are making use of <code>Iterator</code>'s <a href="https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.find">find</a> api. We have not talked about
<code>List</code>'s iterator implementation yet - which we will turn to next.
`</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../doubly_linkedlist/delete.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../doubly_linkedlist/iterators.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../doubly_linkedlist/delete.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../doubly_linkedlist/iterators.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
